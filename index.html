<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>S.E.A.N.G • ProPlugin (Ceiling/Surface Estimator · SPL‑aware + Dynamic Tap)</title>
<style>
:root{--gap:12px;--font:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans Thai",sans-serif}
html,body{height:100%}
body{margin:0;font-family:var(--font);background:#0f172a;color:#e2e8f0}
header{padding:16px 20px;border-bottom:1px solid #334155;display:flex;align-items:center;gap:12px}
header h1{font-size:18px;margin:0}
main{display:grid;grid-template-columns:460px 1fr;gap:20px;padding:20px}
fieldset{border:1px solid #334155;border-radius:10px;padding:14px;margin:0 0 16px 0}
legend{padding:0 6px;color:#93c5fd}
label{display:block;font-size:13px;margin:10px 0 4px}
input,select{width:100%;padding:10px;border:1px solid #475569;border-radius:8px;background:#0b1220;color:#e2e8f0}
.row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
button{padding:12px 14px;border:0;border-radius:10px;background:#2563eb;color:#fff;font-weight:600;cursor:pointer}
button.secondary{background:#1f2937}
.panel{background:#0b1220;border:1px solid #334155;border-radius:12px;padding:12px}
#canvas{width:100%;height:620px;background:#020617;border:1px solid #334155;border-radius:12px}
.kpi{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px}
.kpi div{background:#0b1220;border:1px solid #334155;border-radius:10px;padding:10px}
.kpi .label{font-size:12px;color:#93a1b2}
.kpi .value{font-size:18px;font-weight:700}
.note{font-size:12px;color:#93a1b2;margin-top:6px}
.err{margin-top:10px;padding:10px;border:1px solid #7f1d1d;background:#450a0a;color:#fecaca;border-radius:10px;display:none}
.toggle{display:flex;align-items:center;gap:8px;font-size:13px}
hr.sep{border:0;border-top:1px dashed #334155;margin:10px 0}
@media(max-width:1180px){.kpi{grid-template-columns:repeat(2,1fr)}}
@media(max-width:1024px){main{grid-template-columns:1fr}}
</style>
</head>
<body>
<header>
  <h1>S.E.A.N.G (Simple Estimator for Audio Network Grid)</h1>
  <div style="margin-left:auto;font-size:12px;opacity:.75">ProPlugin • Ceiling/Surface Levels + Dynamic Tap</div>
</header>
<main>
  <section>
    <form id="form" aria-describedby="err">
      <fieldset>
        <legend>หน่วย & ขนาดห้อง</legend>
        <div class="row">
          <div>
            <label for="units">หน่วย (Units)</label>
            <select id="units"><option value="m">เมตร (m)</option><option value="ft">ฟุต (ft)</option></select>
          </div>
          <div>
            <label for="layout">เลย์เอาต์กริด (ใช้กับ Ceiling)</label>
            <select id="layout"><option value="square">Square</option><option value="hex">Hex</option></select>
          </div>
        </div>
        <div class="row">
          <div><label for="roomW">กว้าง (Width)</label><input type="text" id="roomW" value="12"></div>
          <div><label for="roomL">ยาว (Length)</label><input type="text" id="roomL" value="18"></div>
        </div>
        <div class="row">
          <div><label for="roomH">สูงเพดาน (Ceiling)</label><input type="text" id="roomH" value="3.2"></div>
          <div>
            <label for="listenerPreset">ความสูงผู้ฟัง</label>
            <select id="listenerPreset">
              <option value="standing">ยืน (1.5 m)</option>
              <option value="seated" selected>นั่ง (1.2 m)</option>
              <option value="custom">กำหนดเอง</option>
            </select>
          </div>
        </div>
        <div class="row" id="listenerCustomRow" style="display:none">
          <div><label for="listenerH">Listener Height</label><input type="text" id="listenerH" value="1.2"></div>
        </div>
        <div class="row">
          <div>
            <label for="gridMode">วิธีคำนวณระยะกริด (Ceiling)</label>
            <select id="gridMode">
              <option value="Hbased" selected>ตาม H (คุณภาพสูง/กลาง/ประหยัด)</option>
              <option value="theta">ตามมุมครอบคลุม θ</option>
            </select>
          </div>
          <div>
            <label for="quality">ระดับคุณภาพเสียง (Ceiling)</label>
            <select id="quality">
              <option value="high" selected>สูง (สม่ำเสมอ)</option>
              <option value="mid">ปานกลาง</option>
              <option value="low">ต่ำ/budget</option>
            </select>
          </div>
        </div>
        <div class="toggle"><input type="checkbox" id="showCoverage"> <label for="showCoverage" style="margin:0">แสดงครอบคลุมโดยประมาณ (Ceiling)</label></div>
      </fieldset>

      <fieldset>
        <legend>แบรนด์ / รุ่น</legend>
        <div class="row">
          <div>
            <label for="brand">แบรนด์</label>
            <select id="brand">
              <option value="">— เลือกแบรนด์ —</option>
              <option value="optimal">Optimal Audio</option>
              <option value="hh">HH</option>
            </select>
          </div>
          <div>
            <label for="model">รุ่น (Preset)</label>
            <select id="model"><option value="">— เลือกรุ่น —</option></select>
          </div>
        </div>
        <div class="note">เลือกแบรนด์/รุ่น → ระบบจะตั้งค่าชนิด/มุมครอบคลุม/ความไว และ <b>ชุด Tap</b> ของรุ่นนั้นให้อัตโนมัติ</div>
      </fieldset>

      <fieldset>
        <legend>พารามิเตอร์ลำโพง</legend>
        <div class="row">
          <div>
            <label for="spkType">ชนิดลำโพง</label>
            <select id="spkType">
              <option value="ceiling">Ceiling</option>
              <option value="pendant">Pendant</option>
              <option value="surface">Surface-mount / On-wall</option>
            </select>
          </div>
          <div>
            <label for="coverage">มุมครอบคลุม (°)</label>
            <input type="text" id="coverage" value="120">
          </div>
        </div>
        <div class="row">
          <div><label for="sens">Sensitivity (dB @1W/1m)</label><input type="text" id="sens" value="88"></div>
          <div>
            <label for="tapSelect">Tap 70V/100V (เฉพาะรุ่น)</label>
            <select id="tapSelect"><option value="auto" selected>Auto (ตาม SPL)</option></select>
          </div>
        </div>
        <div class="row" id="tapCustomRow" style="display:none">
          <div><label for="tapCustom">Custom Tap (คอมมาแยก ถ้ารุ่นไม่ระบุ)</label><input type="text" id="tapCustom" placeholder="เช่น 2,4,8,16"></div>
          <div></div>
        </div>
      </fieldset>

      <fieldset>
        <legend>SPL Target & Noise</legend>
        <div class="row">
          <div>
            <label for="splMode">โหมด</label>
            <select id="splMode">
              <option value="direct" selected>กำหนด Target SPL (dB)</option>
              <option value="noise">กำหนดพื้นเสียง + SNR</option>
            </select>
          </div>
          <div>
            <label for="arrayGain">Array/Overlap Gain (dB)</label>
            <input type="text" id="arrayGain" value="3">
          </div>
        </div>
        <div class="row" id="splDirectRow">
          <div><label for="targetSPL">Target SPL @ ผู้ฟัง (dB)</label><input type="text" id="targetSPL" value="78"></div>
          <div><label for="systemV">ระบบแรงดัน (ข้อมูล)</label>
            <select id="systemV">
              <option value="100">100V</option>
              <option value="70">70V</option>
            </select>
          </div>
        </div>
        <div class="row" id="splNoiseRow" style="display:none">
          <div><label for="bgNoise">พื้นเสียง (Noise, dBA)</label><input type="text" id="bgNoise" value="55"></div>
          <div><label for="snr">ต้องการ SNR (dB)</label><input type="text" id="snr" value="10"></div>
        </div>
        <div class="note">สูตรโดยสรุป: SPL@r ≈ Sens + 10·log10(P) − 20·log10(r). ระบบจะประมาณ <i>r</i> จากความสูงและระยะกริด พร้อมหักลบ Array Gain เพื่อคำนวณ Tap ที่เหมาะสม</div>
      </fieldset>

      <div class="row">
        <button type="button" id="calcBtn">คำนวณ</button>
        <button type="button" class="secondary" id="clearBtn">ล้างค่า</button>
      </div>
      <div class="err" id="err" role="alert"></div>
    </form>
  </section>

  <section class="panel">
    <canvas id="canvas"></canvas>
    <div class="kpi">
      <div><div class="label">จำนวนลำโพง</div><div class="value" id="kCount">-</div></div>
      <div><div class="label">ระยะวาง (C–C)</div><div class="value" id="kSpacing">-</div></div>
      <div><div class="label">Tap แนะนำ/ที่เลือก</div><div class="value" id="kTap">-</div></div>
      <div><div class="label">รวมโหลด (W)</div><div class="value" id="kTotalW">-</div></div>
    </div>
    <div id="summary" style="margin-top:12px;font-size:13px"></div>
    <div id="ampBox" style="margin-top:8px;font-size:13px;padding:10px;border:1px solid #334155;border-radius:10px;">
      <div style="opacity:.9">กำลังแอมป์ที่แนะนำ (เผื่อ headroom): <b id="kAmpRec">-</b></div>
      <div style="opacity:.7;margin-top:4px">เกณฑ์: รวมโหลด × <span id="kHeadroomPct">1.25×</span> + สาย ~2–5% (พิจารณาเพิ่มตามความยาวสาย)</div>
    </div>
  </section>
</main>

<script>
// ========= helpers =========
const $=id=>document.getElementById(id);
const toRad=deg=>deg*Math.PI/180;
function sanitizeNum(v){v=String(v??'').replace(',', '.').replace(/[^\d\.\-]/g,'');const n=parseFloat(v);return isNaN(n)?null:n;}
function fmt(v,u){return(u==='m')?v.toFixed(2)+' m':(v*3.28084).toFixed(2)+' ft';}
function fromUnits(v,u){return(u==='m')?v:v/3.28084;}
function nearestTap(p,taps){if(!taps||!taps.length||!isFinite(p)||p<=0) return null;let ge=taps.find(t=>t>=p);return ge!=null?ge:taps[taps.length-1];}
function showErr(m){$('err').style.display='block';$('err').textContent=m;}
function clearErr(){$('err').style.display='none';}
const HEADROOM = 1.25; // 25% headroom
const AMP_STEPS = [30,60,100,120,150,240,300,350,500,600,1000];

// ========= Presets (เพิ่มตามสเปกจริงได้) =========
const PRESETS={
  optimal:{label:'Optimal Audio',models:{
    'Up 3 (Ceiling)':{type:'ceiling',coverage:120,sens:86,taps:'1.5,3,6,12'},
    'Up 4 (Ceiling)':{type:'ceiling',coverage:120,sens:87,taps:'3.2,6.3,12.5,25'},
    'Up 6 (Ceiling)':{type:'ceiling',coverage:110,sens:90,taps:'7.5,15,30,60'},
    'Cuboid 3TX (Surface)':{type:'surface',coverage:90,sens:86,taps:'7.5,15,30'},
    'Cuboid 5TX (Surface)':{type:'surface',coverage:90,sens:87,taps:'15,30,60'},
    'Cuboid 6TX (Surface)':{type:'surface',coverage:90,sens:88,taps:'15,30,60'}
  }},
  hh:{label:'HH',models:{
    'TNi-C6 (Ceiling)':{type:'ceiling',coverage:120,sens:89,taps:'7.5,15,30,60'},
    'TNi-C8 (Ceiling)':{type:'ceiling',coverage:120,sens:91,taps:'10,20,40,60'},
    'APT-C6 (Ceiling)':{type:'ceiling',coverage:120,sens:90,taps:'7.5,15,30,60'},
    'APT-C8 (Ceiling)':{type:'ceiling',coverage:120,sens:92,taps:'10,20,40,60'}
  }}
};
let currentModelTaps=[];

// ========= UI: Brand/Model =========
function refreshModels(){
  const b=$('brand').value;const sel=$('model');
  sel.innerHTML='<option value="">— เลือกรุ่น —</option>';
  if(!b||!PRESETS[b]) return;
  for(const k of Object.keys(PRESETS[b].models)){
    const o=document.createElement('option');o.value=k;o.textContent=k;sel.appendChild(o);
  }
}
function populateTapSelectFromModel(preset){
  const tapSel=$('tapSelect'); tapSel.innerHTML='';
  const optAuto=document.createElement('option');optAuto.value='auto';optAuto.textContent='Auto (ตาม SPL)';tapSel.appendChild(optAuto);
  currentModelTaps=[];
  if(preset && preset.taps){
    currentModelTaps=String(preset.taps).split(/[,;]/).map(s=>sanitizeNum(s)).filter(v=>isFinite(v)).sort((a,b)=>a-b);
  }
  if(currentModelTaps.length){
    for(const t of currentModelTaps){const o=document.createElement('option');o.value=String(t);o.textContent=`${t} W`;tapSel.appendChild(o);} 
    $('tapCustomRow').style.display='none'; tapSel.disabled=false;
  }else{
    const o=document.createElement('option');o.value='custom';o.textContent='Custom…';tapSel.appendChild(o);tapSel.value='custom'; $('tapCustomRow').style.display='grid';
  }
}
function applyModel(){
  const b=$('brand').value,m=$('model').value;if(!b||!m) return; const p=PRESETS[b]?.models?.[m]; if(!p) return;
  $('spkType').value=p.type||'ceiling'; if(p.coverage!=null) $('coverage').value=p.coverage; if(p.sens!=null) $('sens').value=p.sens;
  populateTapSelectFromModel(p); toggleTapCustom();
}
function toggleTapCustom(){ $('tapCustomRow').style.display = ($('tapSelect').value==='custom') ? 'grid' : 'none'; }
function getActiveTapArray(){
  const sel=$('tapSelect').value; if(sel==='custom'){ const raw=$('tapCustom').value||''; return raw.split(/[,;]/).map(s=>sanitizeNum(s)).filter(v=>isFinite(v)).sort((a,b)=>a-b);} return currentModelTaps.slice();
}

// ========= SPL helpers =========
function calcTargetSPL(){
  const mode=$('splMode').value; if(mode==='direct'){return sanitizeNum($('targetSPL').value)||78;}
  const noise=sanitizeNum($('bgNoise').value)||55; const snr=sanitizeNum($('snr').value)||10; return noise+snr;
}
function pickAmpSize(w){ for(const s of AMP_STEPS){ if(s>=w-1e-6) return s; } return Math.ceil(w/100)*100; }
function getBounds(pts){ let minX=Infinity,maxX=-Infinity,minY=Infinity,maxY=-Infinity; for(const p of pts){ if(p.x<minX)minX=p.x; if(p.x>maxX)maxX=p.x; if(p.y<minY)minY=p.y; if(p.y>maxY)maxY=p.y; } return {minX,maxX,minY,maxY}; }
function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }

// ========= Core Calculator =========
function layout(){
  clearErr();
  const u=$('units').value;
  const W=fromUnits(sanitizeNum($('roomW').value),u);
  const L=fromUnits(sanitizeNum($('roomL').value),u);
  const H=fromUnits(sanitizeNum($('roomH').value),u);
  if([W,L,H].some(v=>!isFinite(v)||v<=0)){showErr('ใส่ค่ากว้าง/ยาว/สูง ให้ถูกต้อง');return;}
  const lp=$('listenerPreset').value; const listenerH=(lp==='standing')?1.5:(lp==='seated')?1.2:fromUnits(sanitizeNum($('listenerH').value)||1.2,u);
  const sens=sanitizeNum($('sens').value), theta=sanitizeNum($('coverage').value); if(!isFinite(sens)||!isFinite(theta)){showErr('ใส่ค่า Sensitivity/Coverage');return;}
  const type=$('spkType').value; const gridMode=$('gridMode').value; const q=$('quality').value; const showCov=$('showCoverage').checked;

  // Geometry helpers
  const dVert=Math.max(0.6, H - listenerH); // min 0.6m safety
  const D = 2*dVert*Math.tan(toRad(theta/2)); // diameter at listener plane

  // grid spacing selection
  let pts=[], spacingShown=null; // meters

  if(type==='surface'){
    // On-wall: place pairs along long walls, 0.5m in from corners visually
    const minS=4, maxS=6; // m
    const nLow=Math.ceil(L/maxS)+1; const nHigh=Math.max(2, Math.floor(L/minS)+1);
    let n=Math.max(2, Math.round(L/5)+1); n=Math.min(Math.max(n,nLow),nHigh);
    const spacingWall=(n>1)?(L/(n-1)):L; spacingShown=spacingWall;
    for(let i=0;i<n;i++){
      const y=i*spacingWall; pts.push({x:0, y}); pts.push({x:W, y});
    }
  } else { // ceiling/pendant
    let start, step;
    if(gridMode==='Hbased'){
      if(q==='high'){ start=H/2; step=H; }
      else if(q==='mid'){ start=H; step=1.5*H; }
      else { start=H; step=2*H; }
    }else{ // theta-based uses coverage
      const f = (q==='high')?0.8 : (q==='mid')?1.0 : 1.2; // tighter -> more uniform
      step = Math.max(0.3, f*D); start = Math.min(H, step/2); // wall margin ≈ half step or H
    }
    const lay=$('layout').value;
    if(lay==='square'){
      const xs=[]; for(let x=start; x<=W-start+1e-9; x+=step){ xs.push(x); }
      const ys=[]; for(let y=start; y<=L-start+1e-9; y+=step){ ys.push(y); }
      if(xs.length===0){ xs.push(Math.min(W/2, Math.max(start, W-start))); }
      if(ys.length===0){ ys.push(Math.min(L/2, Math.max(start, L-start))); }
      for(const y of ys){ for(const x of xs){ pts.push({x,y}); } }
      // centering
      const b=getBounds(pts); const cx=(b.minX+b.maxX)/2, cy=(b.minY+b.maxY)/2; const dx=(W/2-cx), dy=(L/2-cy);
      const dxC=clamp(dx, start-b.minX, W-start-b.maxX); const dyC=clamp(dy, start-b.minY, L-start-b.maxY);
      pts = pts.map(p=>({x:p.x+dxC, y:p.y+dyC})); spacingShown=step;
    }else{
      const s=step, dy=s*Math.sqrt(3)/2; let y=start; while(y<=L-start+1e-9){ const off = (Math.round((y-start)/dy)%2===1)? s/2:0; let x=start+off; while(x<=W-start+1e-9){ pts.push({x,y}); x+=s; } y+=dy; }
      if(pts.length===0){ pts.push({x:clamp(W/2,start,W-start), y:clamp(L/2,start,L-start)}); }
      const b=getBounds(pts); const cx=(b.minX+b.maxX)/2, cy=(b.minY+b.maxY)/2; const dx=(W/2-cx), dy2=(L/2-cy);
      const dxC=clamp(dx, start-b.minX, W-start-b.maxX); const dyC=clamp(dy2, start-b.minY, L-start-b.maxY);
      pts = pts.map(p=>({x:p.x+dxC, y:p.y+dyC})); spacingShown=step;
    }
  }

  // === SPL-based tap selection ===
  const tapsArr=getActiveTapArray();
  const tapSelVal=$('tapSelect').value;
  const arrayGain = sanitizeNum($('arrayGain').value)||0; // dB decrease per-speaker requirement
  const targetSPL = calcTargetSPL();

  // worst-case listener is mid-point between speakers: horizontal ~ spacing/2
  const rHoriz = Math.max(0.01, (spacingShown||D)*0.5); // m
  const r = Math.sqrt(dVert*dVert + rHoriz*rHoriz); // m
  const splPerSpeaker = targetSPL - arrayGain; // dB
  // P_req from: SPL = sens + 10log10(P) - 20log10(r)
  const P_req = Math.pow(10, (splPerSpeaker - sens + 20*Math.log10(r)) / 10);

  let chosenTap=null; if(tapSelVal==='auto' || tapSelVal==='custom'){ chosenTap = nearestTap(P_req, tapsArr);} else { const v=sanitizeNum(tapSelVal); chosenTap=isFinite(v)?v:nearestTap(P_req, tapsArr); }

  // Aggregates
  const count=pts.length; const totalW = (chosenTap!=null)? count*chosenTap : null; const ampRecommendedW = (totalW!=null)? pickAmpSize(totalW*HEADROOM*1.03) : null; // ~3% cable

  // Draw & UI
  drawRoom(W,L,pts,u,type, showCov ? {D} : null);
  $('kCount').textContent=count;
  $('kSpacing').textContent=spacingShown?fmt(spacingShown,u):'-';
  $('kTap').textContent=(chosenTap!=null)?(chosenTap.toFixed(2)+' W'):'-';
  $('kTotalW').textContent=(totalW!=null)?(totalW.toFixed(1)+' W'):'-';
  $('kHeadroomPct').textContent=HEADROOM.toFixed(2)+'×';
  $('kAmpRec').textContent=(ampRecommendedW!=null)?(ampRecommendedW+' W (ขั้นต่ำ)'):'-';

  const modelText=$('model').value||'-'; const typeText=$('spkType').value; const tSPL=Math.round(targetSPL*10)/10; const rDisp = r.toFixed(2);
  $('summary').innerHTML=`รุ่น <b>${modelText}</b> • ชนิด <b>${typeText}</b> • จุด <b>${count}</b> • ระยะวิกฤติ ≈ <b>${fmt(r,'m')}</b> • Target SPL <b>${tSPL} dB</b>`;
}

function drawRoom(Wm,Lm,pts,u,type='ceiling',cov){
  const c=$('canvas'),ctx=c.getContext('2d'); const dpi=window.devicePixelRatio||1; c.width=c.clientWidth*dpi; c.height=c.clientHeight*dpi; ctx.setTransform(dpi,0,0,dpi,0,0); ctx.clearRect(0,0,c.clientWidth,c.clientHeight);
  const pad=30,w=c.clientWidth,h=c.clientHeight; const sx=(w-2*pad)/Wm, sy=(h-2*pad)/Lm, s=Math.min(sx,sy); const ox=(w-Wm*s)/2, oy=(h-Lm*s)/2;
  // room
  ctx.strokeStyle='#475569'; ctx.lineWidth=2; ctx.strokeRect(ox,oy,Wm*s,Lm*s);
  if(type==='surface'){ ctx.fillStyle='rgba(59,130,246,0.12)'; ctx.fillRect(ox-2,oy,4,Lm*s); ctx.fillRect(ox+Wm*s-2,oy,4,Lm*s); }
  // speakers & optional coverage
  for(const p of pts){ const x=ox+p.x*s, y=oy+p.y*s; if(type==='surface'){ ctx.beginPath(); ctx.moveTo(x,y-6); ctx.lineTo(x+6,y+6); ctx.lineTo(x-6,y+6); ctx.closePath(); ctx.fillStyle='#f59e0b'; ctx.fill(); } else if(type==='pendant'){ ctx.fillStyle='#38bdf8'; ctx.fillRect(x-5,y-5,10,10); } else { ctx.beginPath(); ctx.arc(x,y,5,0,Math.PI*2); ctx.fillStyle='#38bdf8'; ctx.fill(); }
    if(cov && type!=='surface'){ ctx.beginPath(); ctx.arc(x,y,(cov.D/2)*s,0,Math.PI*2); ctx.strokeStyle='rgba(148,163,184,0.35)'; ctx.lineWidth=1; ctx.setLineDash([6,6]); ctx.stroke(); ctx.setLineDash([]); }
  }
  // scale text
  ctx.fillStyle='#94a3b8'; ctx.font='14px sans-serif'; ctx.fillText(`W: ${fmt(Wm,'m')}`, ox, oy-8); ctx.save(); ctx.translate(ox-8, oy+12); ctx.rotate(-Math.PI/2); ctx.fillText(`L: ${fmt(Lm,'m')}`, 0, 0); ctx.restore();
}

// ========= events =========
$('brand').addEventListener('change', refreshModels);
$('model').addEventListener('change', applyModel);
$('listenerPreset').addEventListener('change', e=>{ $('listenerCustomRow').style.display=(e.target.value==='custom')?'grid':'none'; });
$('tapSelect').addEventListener('change', toggleTapCustom);
$('spkType').addEventListener('change', ()=>{ const dis = ($('spkType').value!=='ceiling'); $('quality').disabled = dis; document.querySelector('.toggle').style.display = dis? 'none':'flex'; $('gridMode').disabled = dis; });
$('splMode').addEventListener('change', e=>{ const d=(e.target.value==='direct'); $('splDirectRow').style.display=d?'grid':'none'; $('splNoiseRow').style.display=d?'none':'grid'; });
$('calcBtn').addEventListener('click', layout);
$('clearBtn').addEventListener('click', ()=>{ $('form').reset(); clearErr(); currentModelTaps=[]; $('tapSelect').innerHTML='<option value="auto" selected>Auto (ตาม SPL)</option>'; $('tapCustomRow').style.display='none'; $('kCount').textContent='-'; $('kSpacing').textContent='-'; $('kTap').textContent='-'; $('kTotalW').textContent='-'; $('kAmpRec').textContent='-'; $('summary').textContent=''; drawRoom(12,18,[],'m'); });

// init
drawRoom(12,18,[],'m');
</script>
</body>
</html>
